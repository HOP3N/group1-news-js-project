var e=document.querySelectorAll("details");for(i=0;i<e.length;i++)e[i].addEventListener("toggle",t);function t(e){if(e.target.open){var t=e.target.parentNode.children;for(i=0;i<t.length;i++)"DETAILS"==t[i].tagName&&t[i].hasAttribute("open")&&e.target!=t[i]&&t[i].removeAttribute("open")}}const a=document.querySelector("#datetime-picker"),n=document.querySelector(".filter-section"),s=document.querySelector(".pagination"),r="SVYGfSzYyEfqvl2Rz9D9zXBCipJV7rQX";let o,c=1;n.addEventListener("click",(function(e){"BUTTON"===e.target.nodeName&&(o=e.target.textContent.trim())}));const l={altFormat:"d/m/Y",ariaDateFormat:"d/m/Y",dateFormat:"d/m/Y",maxDate:new Date,defaultDate:new Date,shorthand:!0,locale:{firstDayOfWeek:1},onClose(e){let t=new Date(e);t=t.toLocaleString().split(",")[0],t=t.replace(/\//g,"-");let a=Array.from(t);return a=a[6]+a[7]+a[8]+a[9]+a[5]+a[3]+a[4]+a[2]+a[0]+a[1],(n=a,i=o,fetch(`https://api.nytimes.com/svc/search/v2/articlesearch.json?q=${i}&fq=pub_date:(${n})&api-key=${r}`).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()}))).then((e=>{void 0===o?d():0===e.response.docs.length&&function(){const e=`<h2 class="section-news__title">We havenâ€™t found news from this category</h2><img src="${imgOps}" alt="Ooooops" class="news-section__img-if-empty"/>`;sectionNewsEl.innerHTML=e,s.innerHTML=""}(),function(e){const t=function(e){return e.map((e=>{c+=1;let t,a,n=e.abstract.slice(0,120)+"...",s=e.headline.main.slice(0,60)+"...",i=e.pub_date.toString().slice(0,10).replace("-","/").replace("-","/");if(e.multimedia.length>0?(t="https://static01.nyt.com/",a=t+e.multimedia[0].url):0===e.multimedia.length&&(a="https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg"),o===e.section_name)return`<li class="news-item" style="order: ${c}">\n    <div class="news-thumb">\n      <img\n        class="img-news"\n        src="${a}"\n        alt="${e.abstract}"\n        width="395"\n        height="395"\n      />\n      <p class="filter-descr">${e.section_name}</p>\n      <button class="link-add"\n        >Add to favorite\n        <svg class="add-icon" width="16" heigth="16">\n          <use href="${svg}#heart-filled"></use>\n        </svg>\n      </button>\n    </div>\n    <div class="desr">\n      <h2 class="title">\n        ${s}\n      </h2>\n      <p class="subtitle">\n        ${n}\n      </p>\n      <div class="other-line">\n        <p class="date">${i}</p>\n        <p class="hyperlink"><a href="${e.url} target="_blank" rel="noopener noreferrer"">Read more</a></p>\n      </div>\n    </div>\n  </li>`})).join("")}(e);if(0===e.length)return d();newsListEl.innerHTML=t}(e.response.docs)})).catch((e=>console.log(e)));var n,i}};function d(){const e=`<h2 class="section-news__title">Please update page and choose the search category</h2><img src="${imgOps}" alt="Ooooops" class="news-section__img-if-empty"/>`;sectionNewsEl.innerHTML=e,s.innerHTML=""}flatpickr(a,l);const m=document.getElementById("cards"),p="https://api.nytimes.com/svc",g="SVYGfSzYyEfqvl2Rz9D9zXBCipJV7rQX",h="/mostpopular/v2/viewed/1.json?api-key=",u=async function(e){const t=await fetch("https://api.nytimes.com/svc/mostpopular/v2/viewed/1.json?api-key=SVYGfSzYyEfqvl2Rz9D9zXBCipJV7rQX"),a=await t.json();let{results:n}=a;return n}();console.log(u),fetch(`${p}${h}${g}`).then((e=>e.json())).then((({results:e})=>{console.log(e);let t="";e?(e.forEach((e=>{const a=e.media.length?e.media[0]["media-metadata"][2].url:"",n=e.media.length?e.media[0].caption:"";t+=`<li class = "card__item" data-id = "${e.uri}">\n    <div class="card__wrapper">\n      <div class="card__thumb">\n        <img class="card__img" src = "${a}" alt = "${n}">\n        <p class="card__news-category">${e.section_name}</p>\n        <p class="card__text-read">Already read</p>\n        <button class="favorite-btn" type="button" data-action="favorite-btn">Add to favorite</button>\n      </div>\n      <h3 class="card__news-title">${e.title}</h3>\n      <p class="card__news-description">${e.abstract}</p>\n      <div class="card__additional-info-container">\n        <p class="card__datetime">${dateFormat(e.published_date,"dd/mm/yyyy")}</p>\n        <a class="card__link" href="${e.url}" target="_blank" rel="noopener noreferrer nofollow">Read more</a>\n      </div>\n      \n    </div>\n</li>`})),m.classList.remove("notFound")):(t="Sorry, we didn't find any news!",m.classList.add("notFound")),m.innerHTML=t,setFavoritesOnLoad()})),m.addEventListener("click",addToFavorite),m.addEventListener("click",(function(e){if(console.log(e.target.dataset),"card__link"===e.target.dataset.action){let t=e.target.parentElement.parentElement.parentElement.dataset.id;console.log(e.target.parentElement.parentElement.dataset.id);const a=JSON.parse(localStorage.getItem("read"))||[];if(e.target.classList.contains("removeFavorite-btn")){console.log(e.target.dataset.action);const n=a.filter((e=>e!==t));localStorage.setItem("read",JSON.stringify(n))}else a.push(t),localStorage.setItem("read",JSON.stringify(a))}}));const f=document.getElementById("cards");fetch(`${"https://api.nytimes.com/svc"}/search/v2/articlesearch.json?q=arts&page=1&api-key=${"SVYGfSzYyEfqvl2Rz9D9zXBCipJV7rQX"}`).then((e=>e.json())).then((({response:e})=>{console.log(e);const t=e.docs;let a="";t?(t.forEach((e=>{const t=e.multimedia.length?`https://static01.nyt.com/${e.multimedia[0].url}`:"",n=e.multimedia.length?`https://static01.nyt.com/${e.multimedia[0].caption}`:"";a+=`<li class = "card__item" data-id = "${e.uri}">\n    <div class="card__wrapper">\n      <div class="card__thumb">\n        <img class="card__img" src = "${t}" alt = "${n}">\n        <p class="card__news-category">${e.section_name}</p>\n        <p class="card__text-read">Already read</p>\n        <button class="favorite-btn" type="button" data-action="favorite-btn">Add to favorite</button>\n      </div>\n      <h3 class="card__news-title">${e.headline.main}</h3>\n      <p class="card__news-description">${e.abstract}</p>\n      <div class="card__additional-info-container">\n        <p class="card__datetime">${dateFormat(e.pub_date,"dd/mm/yyyy")}</p>\n        <a class="card__link" href="${e.web_url}" target="_blank" rel="noopener noreferrer nofollow">Read more</a>\n      </div>\n      \n    </div>\n</li>`})),f.classList.remove("notFound")):(a="Sorry, we didn't find any news!",f.classList.add("notFound")),f.innerHTML=a,setFavoritesOnLoad()})),f.addEventListener("click",addToFavorite),f.addEventListener("click",(function(e){if(console.log(e.target.dataset),"card__link"===e.target.dataset.action){let t=e.target.parentElement.parentElement.parentElement.dataset.id;console.log(e.target.parentElement.parentElement.dataset.id);const a=JSON.parse(localStorage.getItem("read"))||[];if(e.target.classList.contains("removeFavorite-btn")){console.log(e.target.dataset.action);const n=a.filter((e=>e!==t));localStorage.setItem("read",JSON.stringify(n))}else a.push(t),localStorage.setItem("read",JSON.stringify(a))}}));
//# sourceMappingURL=index.305c71ff.js.map
