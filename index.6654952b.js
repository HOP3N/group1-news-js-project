(()=>{const e=document.querySelector(".js-menu-container"),t=document.querySelector(".js-open-menu"),a=document.querySelector(".js-close-menu"),n=()=>{const a="true"===t.getAttribute("aria-expanded")||!1;t.setAttribute("aria-expanded",!a),e.classList.toggle("is-open");bodyScrollLock[a?"enableBodyScroll":"disableBodyScroll"](document.body)};t.addEventListener("click",n),a.addEventListener("click",n),window.matchMedia("(min-width: 768px)").addEventListener("change",(a=>{a.matches&&(e.classList.remove("is-open"),t.setAttribute("aria-expanded",!1),bodyScrollLock.enableBodyScroll(document.body))}))})();const e=()=>fetch(`${a}/mostpopular/v2/viewed/1.json?${t}`).then((e=>{if(!e.ok)throw new Error(`${e.status} - ${e.statusText}`);return e.json()})),t="api-key=SVYGfSzYyEfqvl2Rz9D9zXBCipJV7rQX",a="https://api.nytimes.com/svc";const n=+window.innerWidth,s=document.querySelector(".pagination"),o=document.querySelector("button.next-page"),r=document.querySelector("button.prev-page"),c=480,d=document.createElement("div");d.innerHTML='\n    <div class="loader-container">\n      <div class="loader"></div>\n    </div>\n';let l=[];document.body.append(d),e().then((e=>e.results)).then((e=>(l=e,console.log(l),l))).then((e=>{const t={currentPage:1,numLinksTwoSide:1,totalPages:Math.ceil(l/g.perPage)||1,perPage:4};return t.perPage=n<=c?4:n>c&&n<=768?7:8,t.totalPages=Math.ceil(l.length/t.perPage),s.innerHTML="",u(t.totalPages),t})).then((e=>g=e)).then((e=>{document.querySelector(".loader-container"),d.remove(),u(e.totalPages)})),window.addEventListener("resize",(()=>{g=m(g),console.log(g),s.innerHTML="",u(g.totalPages)}));const m=e=>{let t=0;const a=+window.innerWidth;t=a<=c?4:a>c&&a<=768?7:8;return{...e,perPage:t,totalPages:Math.ceil(l.length/t)}};let g={currentPage:1,numLinksTwoSide:1,totalPages:0,perPage:4};function u(e){const{currentPage:t,numLinksTwoSide:a}=g;console.log("pagination render",e);const n=a+4;let i="",o="",r='<li class="pg-item pg-item--dot"><a class="pg-link">...</a></li>',c=0;const d=t-a,l=t+a;let m="";for(let a=1;a<=e;a++)m=a===t?"active":"",e>=2*n-1?d>3&&l<e-3+1?a>=d&&a<=l&&(o+=p(a,m)):t<n&&a<=n||t>e-n&&a>=e-n+1||a===e||1===a?i+=p(a,m):(c++,1===c&&(i+=r)):i+=p(a,m);o?(o=p(1)+r+o+r+p(e),s.innerHTML=o):s.innerHTML=i}function p(e,t=""){return`\n    <li class="pg-item ${t}" data-page="${e}">\n      <a class="pg-link" href="#">${e}</a>\n    </li>\n  `}function v(){1===g.currentPage?r.disabled=!0:r.disabled=!1}function h(){g.currentPage===g.totalPages?o.disabled=!0:o.disabled=!1}u(g.totalPages),s.addEventListener("click",(e=>{if(e.target.dataset.page){const t=parseInt(e.target.dataset.page,10);g.currentPage=t,u(g.totalPages),v(),h()}})),document.querySelector(".page-container").addEventListener("click",(function(e){!function(e){e.classList.contains("btn-prev")?(g.currentPage--,v(),o.disabled=!1):e.classList.contains("btn-next")&&(g.currentPage++,h(),r.disabled=!1);u(g.totalPages)}(e.target)}));var y=document.querySelectorAll("details");for(i=0;i<y.length;i++)y[i].addEventListener("toggle",f);function f(e){if(e.target.open){var t=e.target.parentNode.children;for(i=0;i<t.length;i++)"DETAILS"==t[i].tagName&&t[i].hasAttribute("open")&&e.target!=t[i]&&t[i].removeAttribute("open")}}const S=document.getElementById("theme-switch");S.checked=!1,S.addEventListener("change",(function(){this.checked?(document.body.classList.remove("light"),document.body.classList.add("dark"),localStorage.setItem("theme","dark"),textSwitcher[0].classList.remove("active"),textSwitcher[1].classList.add("active"),imageSwitcher[0].classList.remove("active"),imageSwitcher[1].classList.add("active")):(document.body.classList.add("light"),document.body.classList.remove("dark"),localStorage.setItem("theme","light"),textSwitcher[1].classList.remove("active"),textSwitcher[0].classList.add("active"),imageSwitcher[1].classList.remove("active"),imageSwitcher[0].classList.add("active"))})),window.addEventListener("load",(function(){const e=localStorage.getItem("theme");document.body.className=e,"dark"===e&&(S.checked=!0,textSwitcher[1].classList.add("active"),imageSwitcher[1].classList.add("active"))}));const _=document.querySelector(".icon-search"),L=document.querySelector(".search-input");_.onclick=function(){L.classList.toggle("active")};const b=document.getElementById("cards"),w="https://api.nytimes.com/svc",E="SVYGfSzYyEfqvl2Rz9D9zXBCipJV7rQX",k="/mostpopular/v2/viewed/1.json?api-key=",$=async function(e){const t=await fetch("https://api.nytimes.com/svc/mostpopular/v2/viewed/1.json?api-key=SVYGfSzYyEfqvl2Rz9D9zXBCipJV7rQX"),a=await t.json();let{results:n}=a;return n}();console.log($),fetch(`${w}${k}${E}`).then((e=>e.json())).then((({results:e})=>{console.log(e);let t="";e?(e.forEach((e=>{const a=e.media.length?e.media[0]["media-metadata"][2].url:"",n=e.media.length?e.media[0].caption:"";t+=`<li class = "card__item" data-id = "${e.uri}">\n    <div class="card__wrapper">\n      <div class="card__thumb">\n        <img class="card__img" src = "${a}" alt = "${n}">\n        <p class="card__news-category">${e.section_name}</p>\n        <p class="card__text-read">Already read</p>\n        <button class="favorite-btn" type="button" data-action="favorite-btn">Add to favorite</button>\n      </div>\n      <h3 class="card__news-title">${e.title}</h3>\n      <p class="card__news-description">${e.abstract}</p>\n      <div class="card__additional-info-container">\n        <p class="card__datetime">${dateFormat(e.published_date,"dd/mm/yyyy")}</p>\n        <a class="card__link" href="${e.url}" target="_blank" rel="noopener noreferrer nofollow">Read more</a>\n      </div>\n      \n    </div>\n</li>`})),b.classList.remove("notFound")):(t="Sorry, we didn't find any news!",b.classList.add("notFound")),b.innerHTML=t,setFavoritesOnLoad()})),b.addEventListener("click",addToFavorite),b.addEventListener("click",(function(e){if(console.log(e.target.dataset),"card__link"===e.target.dataset.action){let t=e.target.parentElement.parentElement.parentElement.dataset.id;console.log(e.target.parentElement.parentElement.dataset.id);const a=JSON.parse(localStorage.getItem("read"))||[];if(e.target.classList.contains("removeFavorite-btn")){console.log(e.target.dataset.action);const n=a.filter((e=>e!==t));localStorage.setItem("read",JSON.stringify(n))}else a.push(t),localStorage.setItem("read",JSON.stringify(a))}}));const P=document.getElementById("cards");fetch(`${"https://api.nytimes.com/svc"}/search/v2/articlesearch.json?q=arts&page=1&api-key=${"SVYGfSzYyEfqvl2Rz9D9zXBCipJV7rQX"}`).then((e=>e.json())).then((({response:e})=>{console.log(e);const t=e.docs;let a="";t?(t.forEach((e=>{const t=e.multimedia.length?`https://static01.nyt.com/${e.multimedia[0].url}`:"",n=e.multimedia.length?`https://static01.nyt.com/${e.multimedia[0].caption}`:"";a+=`<li class = "card__item" data-id = "${e.uri}">\n    <div class="card__wrapper">\n      <div class="card__thumb">\n        <img class="card__img" src = "${t}" alt = "${n}">\n        <p class="card__news-category">${e.section_name}</p>\n        <p class="card__text-read">Already read</p>\n        <button class="favorite-btn" type="button" data-action="favorite-btn">Add to favorite</button>\n      </div>\n      <h3 class="card__news-title">${e.headline.main}</h3>\n      <p class="card__news-description">${e.abstract}</p>\n      <div class="card__additional-info-container">\n        <p class="card__datetime">${dateFormat(e.pub_date,"dd/mm/yyyy")}</p>\n        <a class="card__link" href="${e.web_url}" target="_blank" rel="noopener noreferrer nofollow">Read more</a>\n      </div>\n      \n    </div>\n</li>`})),P.classList.remove("notFound")):(a="Sorry, we didn't find any news!",P.classList.add("notFound")),P.innerHTML=a,setFavoritesOnLoad()})),P.addEventListener("click",addToFavorite),P.addEventListener("click",(function(e){if(console.log(e.target.dataset),"card__link"===e.target.dataset.action){let t=e.target.parentElement.parentElement.parentElement.dataset.id;console.log(e.target.parentElement.parentElement.dataset.id);const a=JSON.parse(localStorage.getItem("read"))||[];if(e.target.classList.contains("removeFavorite-btn")){console.log(e.target.dataset.action);const n=a.filter((e=>e!==t));localStorage.setItem("read",JSON.stringify(n))}else a.push(t),localStorage.setItem("read",JSON.stringify(a))}}));
//# sourceMappingURL=index.6654952b.js.map
